{"data":[{"id":"1693279138945800","contents":"# Export data via TQL\n\n> For smooth practice, the following query should be run to prepare tables and data.","height":98,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279148150947","contents":"CREATE TAG TABLE IF NOT EXISTS EXAMPLE (NAME VARCHAR(20) PRIMARY KEY, TIME DATETIME BASETIME, VALUE DOUBLE SUMMARIZED);","height":54,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279147979349","contents":"```sql\nINSERT INTO EXAMPLE VALUES('TAG0', TO_DATE('2021-08-12'), 10);\nINSERT INTO EXAMPLE VALUES('TAG1', TO_DATE('2021-08-13'), 11);\n```","height":97,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279146649777","contents":"The table data is converted to TQL and extracted into a file.\n\n## Export CSV","height":92,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279188229921","contents":"SQL(`select * from example`)\nCSV()","height":60,"minimal":false,"type":"tql","tqlType":"text","lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279188077340","contents":"## Export JSON","height":68,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279177961235","contents":"SQL(`select * from example`)\nJSON()","height":74,"minimal":false,"type":"tql","tqlType":"text","lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279235296690","contents":"## Export CSV with TQL script\n\nCopy the code below into TQL editor and save `export-tql-csv.tql`.","height":102,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279235104574","contents":"SQL( 'select * from example' )\nSCRIPT({\n    text := import(\"text\")\n    ctx := import(\"context\")\n\n    key := ctx.key()\n    column := ctx.value()\n    value := int(column[1])\n    r_value := \"\"\n\n    if  (value % 2) == 0 {\n        r_value = \"even\"\n    } else {\n        r_value = \"odd\"\n    }\n\n    ctx.yieldKey(key + \"-tql\", value,  r_value)\n})\nCSV()","height":391,"minimal":false,"type":"tql","tqlType":"text","lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693279225266149","contents":"Open it with web browser at [http://127.0.0.1:5654/db/tql/export-tql-csv.tql](http://127.0.0.1:5654/db/tql/export-tql-csv.tql), or use *curl* command on the terminal.\n\n```sh\nTAG1-tql,11,odd\nTAG0-tql,10,even\n```","height":157,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true}]}