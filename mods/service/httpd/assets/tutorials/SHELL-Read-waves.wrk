{"data":[{"id":"1693276300261450","contents":"# Reading data by shell\n\n> For smooth practice, \n> The command below on the [Write waves by shell](https://neo.machbase.com/docs/tutorials/shell/shell-write-waves) must be in the Running state.\n> ```sh\n> sh gen_wave.sh | machbase-neo shell import --timeformat=s EXAMPLE\n> ```\n> \n\n## SQL Query\n\nThe simplest way to print out data using \"SQL query\".\n\n```sh\nmachbase-neo shell \"select * from EXAMPLE order by time desc\"\n```\n```\n #     NAME      TIME(UTC)            VALUE\n────────────────────────────────────────────────\n 1     wave.sin  2023-01-28 14:03:59  0.214839\n 2     wave.cos  2023-01-28 14:03:59  -0.976649\n 3     wave.sin  2023-01-28 14:03:58  0.593504\n 4     wave.cos  2023-01-28 14:03:58  -0.804831\n  ...\n```\n\n<!--![img](./img/shell-sql.gif)-->\n\nWe executed query by `machbase-neo shell` without `sql` sub-command above example.\nIt properly printed out result of query which is becuase machbase-neo shell takes `sql` sub-command as default as long as there are no other arguments and flags. This means `machbase-neo shell \"select...\"` is same with `machbase-neo shell sql \"select...\"`.\n\nSo when we use some flags for executing query, explicitly sepcifiy `sql` subcommand like below.\n\n```sh\nmachbase-neo shell sql \\\n    --tz America/Los_Angeles \\\n    \"select * from EXAMPLE order by time desc limit 4\"\n```\n\n```\n #  NAME      TIME(AMERICA/LOS_ANGELES)  VALUE\n───────────────────────────────────────────────────\n 1  wave.sin  2023-01-28 06:03:59        0.214839\n 2  wave.cos  2023-01-28 06:03:59        -0.976649\n 3  wave.cos  2023-01-28 06:03:58        -0.804831\n 4  wave.sin  2023-01-28 06:03:58        0.593504\n```\n\nMachbase treats all time data in UTC as default.\nUse `--tz` option to display time in any time-zone other than 'UTC' like above example. \nThis flag accepts 'local' and tz database format (eg: 'Europe/Paris').\n\n```sh\nmachbase-neo shell sql \\\n    --tz local \\\n    \"select * from EXAMPLE order by time desc limit 4\"\n```\n```\n #  NAME      TIME(LOCAL)          VALUE\n─────────────────────────────────────────────\n 1  wave.sin  2023-01-28 23:03:59  0.214839\n 2  wave.cos  2023-01-28 23:03:59  -0.976649\n 3  wave.cos  2023-01-28 23:03:58  -0.804831\n 4  wave.sin  2023-01-28 23:03:58  0.593504\n ```\n\n## Table view\n\nIt is also possible browsing query result forward/backward with \"walk\" command like below.\n\n```sh\nmachbase-neo shell walk \"select * from EXAMPLE order by time desc\"\n```\n\nThen you can scroll up/down with keyboard, press `ESC` to exit table view.\n\nPress `r` to re-execute query to refresh result, it is particularly useful with query was sorted by `order by time desc` to see the latest values when data is continuously being written.\n\n<!--![img](./img/shell-walk.gif)-->\n\n## Query Output format\n\n### JSON\n\nUse `--format json` option\n\n```sh\nmachbase-neo shell sql \\\n    --format json \\\n    \"select * from EXAMPLE order by time desc limit 4\"\n```\n\n```json\n{\n  \"data\": {\n    \"columns\": [\"ROWNUM\",\"NAME\",\"TIME(UTC)\",\"VALUE\"],\n    \"types\": [\"string\",\"string\",\"datetime\",\"double\"],\n    \"rows\": [\n      [1,\"wave.sin\",\"2023-01-28 14:03:59\",0.214839],\n      [2,\"wave.cos\",\"2023-01-28 14:03:59\",-0.976649],\n      [3,\"wave.cos\",\"2023-01-28 14:03:58\",-0.804831],\n      [4,\"wave.sin\",\"2023-01-28 14:03:58\",0.593504]\n    ]\n  }\n}\n```\n\n### CSV\n\nUse `--format csv` option\n\n```sh\nmachbase-neo shell sql  \\\n    --format csv \\\n    \"select * from EXAMPLE order by time desc limit 4\"\n```\n\n```\n#,NAME,TIME(UTC),VALUE\n1,wave.sin,2023-01-28 14:03:59,0.214839\n2,wave.cos,2023-01-28 14:03:59,-0.976649\n3,wave.cos,2023-01-28 14:03:58,-0.804831\n4,wave.sin,2023-01-28 14:03:58,0.593504\n```\n\nUse `--no-heading` option to exclude the first line header \n\n```sh\nmachbase-neo shell sql \\\n    --format csv \\\n    --no-heading \\\n    \"select * from EXAMPLE order by time desc limit 4\"\n```\n\n```\n1,wave.sin,2023-01-28 14:03:59,0.214839\n2,wave.cos,2023-01-28 14:03:59,-0.976649\n3,wave.cos,2023-01-28 14:03:58,-0.804831\n4,wave.sin,2023-01-28 14:03:58,0.593504\n```\n\n## Query Time format\n\nUse `--timeformat` option to sepcify time output format.\n\nExecute `help timeformat` to display pre-defined formats and syntax for custom format.\n\n```sh\nmachbase-neo shell help timeformat\n```\n\n### Pre-defined timeformats\n\n| Name          | Format                                    |\n|:--------------|:------------------------------------------|\n| Default,-     |    2006-01-02 15:04:05.999                |\n| ns, us, ms, s | (UNIX epoch in nano-, mili-, micro-, seconds as int64) |\n| Numeric       |    01/02 03:04:05PM '06 -0700             |\n| RFC822        |    02 Jan 06 15:04 MST                    |\n| RFC850        |    Monday, 02-Jan-06 15:04:05 MST         |\n| RFC3339       |    2006-01-02T15:04:05Z07:00              |\n| Kitchen       |    3:04:05PM                              |\n| Stamp         |    Jan _2 15:04:05                        |\n| ...(there are more)...       | Please consult `machbase-neo shell help timeformat` |\n\nTry `--timeformat numeric` format.\n\n```sh\nmachbase-neo shell sql \\\n    --timeformat numeric \\\n    \"select * from example where name='wave.sin' order by time desc limit 1\"\n```\n\n```\n #  NAME      TIME(UTC)                   VALUE\n───────────────────────────────────────────────────\n 1  wave.sin  01/28 02:03:59PM '23 +0000  0.214839\n```\n\n`-t` is a shorten alias of `--timeformat`\n\n```sh\nmachbase-neo shell sql \\\n    -t ms \\\n    \"select * from example where name='wave.sin' order by time desc limit 1\"\n```\n\n```\n #  NAME      TIME(UTC)      VALUE\n──────────────────────────────────────\n 1  wave.sin  1674914639000  0.214839\n```\n\n### Custom time format\n\nIt is also possible your own custom format.\n\n```sh\nmachbase-neo shell sql \\\n    --timeformat \"2006.01.02 (15:04:05.000)\" \\\n    \"select * from example where name='wave.sin' order by time desc limit 1\"\n```\n\n```\n #  NAME      TIME(UTC)                    VALUE\n────────────────────────────────────────────────────\n 1  wave.sin  \"2023.01.28 (14:03:59.000)\"  0.214839\n```\n\n| Value      | Symbol                                    |\n|:-----------|:------------------------------------------|\n| year       | 2006                                      |\n| month      | 01                                        |\n| day        | 02                                        |\n| hour       | 03 or 15                                  |\n| minute     | 04                                        |\n| second     | 05 or with sub-seconds '05.999' or '05.000'|\n\n\n### Combine time format and time zone\n\n```sh\nmachbase-neo shell sql \\\n    --tz Europe/Paris \\\n    --timeformat \"2006.01.02 (15:04:05.000)\" \\\n    \"select * from example where name='wave.sin' order by time desc limit 1\"\n```\n\n```\n #  NAME      TIME(EUROPE/PARIS)           VALUE\n────────────────────────────────────────────────────\n 1  wave.sin  \"2023.01.28 (15:03:59.000)\"  0.214839\n```\n\n> Since `s`,`ms`,`us` and `ns`  formats are represents UNIX epoch time. \n> If one of these formats are used, `--tz` option is ignored.\n> Becuase epoch time is always in UTC.\n\n","height":328,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true}]}