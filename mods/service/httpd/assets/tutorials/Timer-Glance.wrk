{"data":[{"id":"1693283417703729","contents":"# Timer\n\nA timer defines a task that should be executed at a given time or repeatedly at a given interval.\n\nLet's make the \"Hello World\" of the timer.\n\n## Make a *tql* script of \"Hello World\"\n\nOpen *tql* editor, copy the code below and save it as `helloworld.tql`.","height":200,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693283530364188","contents":"SCRIPT({\n    fmt := import(\"fmt\")\n    fmt.println(\"Hello World?\")\n    ctx := import(\"context\")\n    ctx.yieldKey(\"message\", \"Hello World?\")\n})\nMARKDOWN()","height":169,"minimal":false,"type":"tql","tqlType":"mrk","lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1693283528125225","contents":"Execute the script and it will show a simple record that key is \"message\" and value is \"Hello World?\".\n\n## Register task\n\nOpen machbase-neo shell and register a new timer to run the script in every 5 seconds.\n\n```\ntimer add helloworld \"@every 5s\" helloworld.tql; \n```\n\nRun `timer list` to verify your registration.\n\n```\nmachbase-neo» timer list;\n╭────────────┬────────────┬────────────────┬───────────┬───────╮\n│ NAME       │ SPEC       │ TQL            │ AUTOSTART │ STATE │\n├────────────┼────────────┼────────────────┼───────────┼───────┤\n│ HELLOWORLD │ @every 5s  │ helloworld.tql │ false     │ STOP  │\n╰────────────┴────────────┴────────────────┴───────────┴───────╯\n```\n\nSince we did not set `--autostart` option, the state of the task is `STOP`.\n\nMake it start to run.\n\n```\ntimer start helloworld;\n```\n\n```\nmachbase-neo» timer list;\n╭────────────┬────────────┬────────────────┬───────────┬─────────╮\n│ NAME       │ SPEC       │ TQL            │ AUTOSTART │ STATE   │\n├────────────┼────────────┼────────────────┼───────────┼─────────┤\n│ HELLOWORLD │ @every 5s  │ helloworld.tql │ false     │ RUNNING │\n╰────────────┴────────────┴────────────────┴───────────┴─────────╯\n```\n\nSee the machbase-neo server process's stdout... it will print \"Hello World\" in every 5 seconds.\n\n```\n2023/08/07 11:44:43.001 INFO  timer-helloworld helloworld helloworld.tql start \nHello World?\n2023/08/07 11:44:43.001 INFO  timer-helloworld helloworld helloworld.tql RUNNING elapsed 862.166µs \n```\n\nStop the task\n\n```\ntimer stop helloworld;\n```","height":200,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true}]}